<div class="image-carousel" id="{{ include.id }}">
  {% assign slide_images = include.images %}
  {% if slide_images and slide_images.size > 0 %}
    {% for img in slide_images %}
      <img src="{{ img | prepend: '/images/' | prepend: base_path }}" class="carousel-slide{% if forloop.first %} active{% endif %}" alt="slide {{ forloop.index }}" onerror="this.remove();">
    {% endfor %}
  {% endif %}
</div>

<style>
  .image-carousel {
    position: relative;
    width: 100%;
    max-width: 700px;
    margin: 1rem auto;
  }
  .image-carousel .carousel-slide {
    display: none;
    width: 100%;
  }
  .image-carousel .carousel-slide.active {
    display: block;
  }
</style>

<script>
  (function(){
    const container=document.getElementById('{{ include.id }}');
    const slides=[...container.querySelectorAll('.carousel-slide')].filter(function(el){return el.parentNode;});
    if(!slides.length) return;
    let idx=0;
    setInterval(function(){
      if(slides.length<2) return;
      slides[idx].classList.remove('active');
      idx=(idx+1)%slides.length;
      slides[idx].classList.add('active');
    }, {{ include.interval | default: 4000 }});
  })();
</script> 